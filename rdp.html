<!DOCTYPE html>
<head>
<html>
<meta charset="utf-8">
<title>Just Another Blog</title>
<meta name="viewport" content="width=960,initial-scale=1">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>

  <script src="/vendor/jquery/dist/jquery.min.js"></script>
  <script src="/js/bundle.min.js"></script>
  <link rel="stylesheet" href="/css/styles.less.min.css">

</head>
<body>

<!--[if lt IE 8]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->


<nav>
<h1>Harsha <a href="http://www.foobar.systems"><img src="/images/floppy.png" width="33" height="33"/></a> Mr. Foo Bar (‸‶</h1>
<a href="/">Index</a>
<a href="/disclaimer.html"><b>DISCLAIMER</b></a>
<a href="https://flattr.com/submit/auto?user_id=harsha_mudi&url=http%3A%2F%2Flexical.foobar.systems" target="_blank"><img src="//api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0"></a>
<br>
<br>
<a href="https://stackoverflow.com/users/1117082/mr-foobar"><img src="/images/so.png" width="33" height="33"/></a>
<a href="https://github.com/harsha-mudi"><img src="/images/gh.png" width="33" height="33"/></a>
<a href="https://www.npmjs.org/~harsha-mudi"><img src="https://www.npmjs.org/static/img/npm.png" width="55" height="33"/></a>
<a href="https://metacpan.org/author/MUCKER"><img src="/images/mp.jpg" width="33" height="33"/></a>
<a href="https://rubygems.org/profiles/mr-foobar"><img src="/images/ruby.png" width="33" height="33"/></a>
<a href="https://pay.reddit.com/user/rm-foobar"><img src="/images/r.jpg" width="33" height="33"/></a>
<a href="https://twitter.com/harsha_mudi"><img src="/images/tw.png" width="33" height="33"/></a>
<a href="https://soundcloud.com/mr-foobar"><img src="/images/sc.png" width="33" height="33"/></a>
<a href="https://vimeo.com/mrfoobar"><img src="/images/vm.png" width="33" height="33"/></a>
<a href="https://mrfoobar.bandcamp.com/"><img src="/images/bc.png" width="33" height="33"/></a>
</nav>




<h2>Reactive Data Processing (The Story)</h2>
<div class="lineno"></div>

<article class="post"><h3>Repo</h3>
<a href="https://github.com/harsha-mudi/rdp">RDP</a>
<a href="https://github.com/harsha-mudi/rdp/issues">Issues / Feedback</a>

<h3>Genesis</h3>
I came across Pure Data ~ 2 years back.

This year I came across the notions of asset pipelines and streams
thanks to node.js and gulp.

This struck me as peculiar as pipelines are a part of shell
programming too.

I investigated further and I found a multitude of names like

1. Pipes and Filters
2. Component Oriented Programming
3. Data Flow Programming

The following seemed related too

4. Event Oriented Programming
4.1 State Machines
5. Workflow Engines
6. Messaging
6.1 OOP
6.2 Parallelism
7. Spreadsheets

But more importantly in existing Engineering domains
Data Flow is the norm.

8. Electronics
8.1 DSP
9. Avionics

Making music has taught me a bit of DSP.
I had to learn hands-on what tweaking a DSP filter <i>felt</i> like.

I found some free time in my hands so I decided to implement a
tiny framework for Data Flow.

I read <a href="https://github.com/tailrecursion/javelin">javelin's</a> source code and felt confident enough to attempt 
this. javelin implements a powerful Spreadsheet Engine in very
few lines. It is a part of <a href="https://github.com/tailrecursion/hoplon">hoplon webframework</a>.

I decided to call it Data Processing rather than Data Flow Processing
as a homage to pre-computing Data Processing Machines of IBM.

I had a dislike of Software at this point, having found that most
Music Softwares pale in comparison to the feel of hardware.
I chose to use Breadboard and Electronics analogies instead Software.

I also set out to answer some questions

* Can low level ideas scale ?
* Are they readable ?

At the moment of typing this, I believe <b>Low > High</b>.

<h3>Implementation</h3>
I quickly scanned Pure Data's implementation and implemented
inlets/outlets and objects(Systems) in js.

I added abstractions of Namespace and Symbols (Lisp) for addressability.

At this point I felt a dire need for State and Data Storage handling.

Having implemented a <a href="https://github.com/harsha-mudi/botes">prototype of Entity Systems</a> earlier I 
added it to RDP too.

State was simply implemented as `this["foo"] = ...` since
Systems are Objects.

I started writing an example app called Esti.

The first challenge was to define Data.
I settled on the definition as slots and values.

I chose to model value as a scalar as seen in Lisp / Perl.

The second challenge was UI development.

Although I love Pure Data's visual Object Oriented Programming,
I decided for traditional UI. DSP like data flow can be done
in a traditional UI ( Music Softwares).

I chose to add a Message Bus for this.
When Systems were done processing data they could trigger the bus.
The bus would interrupt another System or something.

In Electronics terms messages are like Discrete Signals.
Pure Data also has a similar notion.

The Application was pretty straightforward.
It looked like a lot of if/else-s unlike OOP.

Post Application development I discovered many important 
properties of Data flow based design

1. Diagram Generation


<a title="click for source" href="https://github.com/harsha-mudi/esti/blob/master/source/js/diagrams.js"><img src="images/esti.png"/></a>,
It is difficult to explain to a stranger about what is happening here.
But to someone who is co-developer / manager ?

One can easily point out things like

* What systems are working
* Where the problems are
* How does the data flow
* Where new ones are needed

2. Simulation

<a href="https://github.com/harsha-mudi/esti/blob/master/sim.xml">See this</a>

<a href="https://github.com/harsha-mudi/esti/blob/master/source/js/simulations.js">That's approximately 100 runs generated by a mere 50 lines
of code</a>.

Since Data between Systems is communicated explicitly, it is very easy to fake it.
This advantage is also gotten with pure Messaging.

3. Step Debugging ?

<iframe src="//player.vimeo.com/video/102414660" width="500" height="375" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

This is more like an Electronics Engineer reading the input and output
signals of a Component.

At this point a weird analogy sticked in my head.

<b>Electronics is like a Play.
Software is like a Film.</b>

I hated Software a little less after that.

4. RPC

<iframe src="//player.vimeo.com/video/102371548" width="640" height="480" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

I call this is "mirroring" where signals are spread across interested systems.
In this case, signals by the user.

I reckon if Etherpad uses something similar.

<hr>
I picked a japanese symbol (carry) for a logo.

<h1>迁</h1>
<hr>
<h3>Limbo</h3>

At this point, I discovered

1. <a href="http://dataflowbook.com/cms/">A book</a>
2. <a href="https://noflojs.org">NoFlo</a>
3. <a href="http://www.jpaulmorrison.com/fbp/">fbp</a>

I interacted, in my own weird way, with the fbp community and quickly discovered
that my thingy comes under the more reactive spectrum.  Noflo is
a bit of reactive and classic.

<h3>Hole in the Flow</h3>
RDP 0.3 has a major flaw.

Because I used `this` to hold State.
A System can only hold one Data Flow at a time.

This seems fine for single user applications but for
multi user applications (servers, games ..) it causes data corruption.

I don't particularly enjoy functional programming and at this point
it felt like yet another pure way of avoiding the problem.

It was hopeless until I found out about <a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.124.1645">Monsoon: an explicit token-store architecture</a>.

<b>TL;DR I can have as much state I want as long I use a new token for each data flow.</b>

A token has a frame analogous to a

1. A Session Object (more)
2. A Stackframe (less)
3. A Continuation (lesser)

<h3>Nojs</h3>
I need OOPy inheritance for RDP.
js sucks for this.

I used coffeescript but it's model of oop doesn't translate well
for other js programmers.

I made port to ruby.
Thanks to <a href="https://github.com/opal/opal">Opal</a> I can target js as well.

Ruby has a Data class already.
So I renamed it to Datron.

It has a merge method `d1.merge(d2)` which I hope makes it
more like electricity.

<h3>Low Level</h3>
The move from assembly to high level has resulted in a 
loss of abstractions which are significant.

1. Memory Management

Can you estimate the memory allocated ?
Can you calculate which function can have a stack overflow ?
Can you draw it ?

2. Interrupts

Assembly languages have first class event oriented programming inbuilt.
High level languages use external apis.

3. Advanced Data Structures

Inbuilt support for matrices, queues, stacks, bounded buffers ...
Most High level language don't give you them.

Aren't High level languages narrow in providing just 
Array operations ?

4. Awareness of OS and Concurrency

Again inbuilt support.
High level languages create a rigid shield between the programmer
from the very system they are trying to code.

<hr>

I consider co-routines to be of the highest order and
its just one of assembly programmer's hacks.

<b>Have we forgotten how the Wheel was invented ?</b></article>
<div style="height:22px; clear: both">
&nbsp;
</div>
<h2 class="blue"><a href="https://github.com/harsha-mudi/lexical-tasklists/issues"><b>issues</b></a></h2>
<h2>see also:</h2>
<div>

    
        <h4><a href="/tags/programming.html">programming</a><br></h4>
    

    
        <h4><a href="/tags/future.html">future</a></h4>
    

</div>

<div style="height:55px; clear: both">
&nbsp;
</div>
<div style="text-align: center">CC BY-NC 2014 Harsha</div>
</body>
</html>
